//
//  Day03.swift
//  Day0301
//
//  Created by Stuart Carnie on 4/12/20.
//

import Foundation

public struct Day03 {

    public static var width: Int {
        get {
            input[0].count
        }
    }

    public static var height: Int {
        get {
            input.count
        }
    }

    public static subscript(col: Int, row: Int) -> MapElement {
        get {
            input[row][col % width]
        }
    }

    public enum MapElement {
        case space, tree

        init(_ el: UTF8.CodeUnit) {
            switch el {
            case UInt8(ascii: "."):
                self = .space
            case UInt8(ascii: "#"):
                self = .tree
            default:
                fatalError("invalid element")
            }
        }

        var rank: Int {
            switch self {
            case .space: return 0
            case .tree: return 1
            }
        }
    }

    public static var input =
        """
        ....#...............#.#..###.##
        .#..#....###..............##...
        ....###......#....#.#...#.##..#
        .......#........#..###...##....
        .....#..#......#..#..##..#...#.
        ....#..........#....#...#......
        ............###...#............
        ##......#.....#......#.....##..
        ........#.........##..#.#...##.
        ....#.#..#.#...#........#..#...
        .#.....#.#......#....#..#..#..#
        #.##..##......#.....##...#..#..
        #........#..##...###....##.....
        ......#.#..##...#.#.....#......
        ##.......#..#.........#...#....
        .....##.........#....#.#.###.#.
        ..##...........#.#.#.#.....#.#.
        ....#...............#......#.#.
        #.#..#....#.....#.....##...#..#
        #......#..............#.#.##...
        ......###.....#...#........###.
        ####...#.....#...#....#........
        .......#...#....##...#.........
        .####..##............#.........
        #.#...#...#....#...#.#......#..
        ..#..#.....#.......#...#.#...##
        .#.........#...#......##.#...#.
        .#.#...#...#.....#.#........#.#
        .#.....###....###..##.#..##.#..
        .....##....#......#..#...#...#.
        #...##....#.......#.....##.##..
        #...#.....#.#...........#..###.
        ##.#........###...........###.#
        #...#.#........#.#.....#.......
        ..................#..#.........
        .....#.#..#.#......#..#.....##.
        .#.#.......#..##........#..##.#
        .#.#..#.#...#.......#.#.#..#...
        ...#......#....#....##.#..#....
        ......#.......##....##..#.....#
        ...#.##...##...............#..#
        .###....#.#.....##..#.......#.#
        #....#..........#...........#.#
        ...#...............#.#..#....#.
        .....#..##..........#..###.....
        .....####.....#.#.......#...#..
        #.............#...#.......##...
        .#....##.......#.#......#.#.##.
        .#..#.......#..##...#...#......
        #.......#..#..#..#.....#.......
        ##...#.#.#...........#....#....
        .......#..#.#..............#.#.
        .....#.......#.......#.#.#.....
        ....##.##.....#......#.......#.
        #...#..#.#....###....##...#.#.#
        #..#......#........#.#.#.....#.
        ###..##..#......#.....#.......#
        ..##....#.#.#......#..##...#...
        .....#..#....#...#.#...#...#...
        .....#.#..###.#..#...##......#.
        #.#..#....#..#.....#.#...#.#...
        .#..#....#.......#..#.......#..
        #.........#..#..#.........##..#
        ..##.##..#..#...##.............
        .....###...#..#...##.#..#......
        #.##.....##..............#.....
        .......#.##.#.##...#.#.......##
        ...#.#.##...#......#...........
        ##.#........#.....##.....#.....
        .#.....#.............#......#..
        ....#..##..#..#....#..#.#......
        .#.....#....##..##..#...##.....
        .##........#.#.#.#..........#.#
        ...#.#.#..#....#...#..###.##...
        .#....#....#.#.#.#....#..#.....
        #.#.......#..#..#...........#.#
        .....#.....##..#....##.........
        ....#.##..............#........
        .................#....#.......#
        ...................###...#...#.
        ...#.#..#..##..##....#.....#...
        #...#..........................
        .......#..#..#.#..#.....#......
        ..##.#..#......#...#.##..##..#.
        .##.........#.#...........#....
        ...#...#..##.#......#..#..#....
        .....#.#....#...#............#.
        .##..#.....##....#...#.........
        #......##...#...#............#.
        .....#.##...#.#....##..........
        .............#.......#.#.......
        ##....#.#........#....#..##....
        ....#...##.#....##..#.....#.#..
        ...##..#....##......#...#......
        .####.#..#..#.#...#.#.#....#...
        .#........#.##....#.#....#.....
        .........#....##..#..#.........
        ....##...#....##.............#.
        ....#..##.#....#.#..#...##.....
        .....##...#..#....#......#.#...
        ..........#.......#.##..#.##..#
        .......#.........#...#.##......
        ....##.#.......#...............
        ....#.......#..##.......##.#.##
        #.#..#.#....#.#.........###...#
        .#.##.....##..##...........#.#.
        ...#....##........##...#...#...
        .#.##....#.#...#.#..#..#...#...
        #....#.##...#.#..#....#.....#..
        #..#...#........#...........#..
        ...........#.......#......#..#.
        ....##...#......##.....#......#
        .#.##.#.#.............#....##..
        .#...#...##.#.#........#..##.#.
        .#.#........#.#...#..#........#
        .###.#.#...#..#..#.#....#..#...
        ..##..##....#.#............#...
        #..........#........#..#.#.#...
        .#...#..#..#.#.....#.....#....#
        #.....#.#.#.....####.......#...
        ...#.#........#.#.###...#.....#
        .....#.....##....#....#..##...#
        ..#....###.##.#..#..#....#...#.
        .....#.....#...........#.#.###.
        .....#......###...#.#...##.....
        ...........###..#...#....#.#..#
        ...#..###.....#....#.#...#.....
        .......#...#..#..##....#.#.#...
        ...#..####.###........#.....#..
        ..#......###..#..#.##..........
        ....#....##..##..##.......###..
        ...#.......#..#.#....##........
        .#.#.....#.#.#..........#..#..#
        .##....##....##...........##.##
        ........#......#.##....##...#.#
        ..#.#.....#..#....#..........#.
        ...........#...............#...
        .....####.....#.....###.#..#...
        ..........####..##.##.#....#...
        ...#.#.#......#....#..#.#......
        .#.#......###.....#....#.......
        ..#..#..#.......#..#...#.....#.
        ...#............#......##...###
        ......#.............#..#..###..
        .#.#......#..##.#..#..#.#...#.#
        .#.....#.......#..#...........#
        ..#.###.#..#...#.##..#.##......
        ....#.#........#..#.#...#.#.##.
        .#..##.#..#.#.#...##..#.#......
        .......#..#..#..#.....#.#.#..#.
        .##.###..##.....#.##..#........
        ...##..............#.#.##....#.
        ##....#...#...........#........
        ..#........#.#.##..#.#...#..#..
        .......#.......##.#..#....#.#..
        .......#....##..#.#.#..#....#..
        ..........#....#..#..#....#....
        ........#.....#.#.....##.......
        ........##.###.........#.#.#...
        ###......####...#.#........#...
        ......#........#......#.....#..
        ##..#.##..##.###..#........##..
        .#..#...#............##.##..#..
        ...........#..#.#..............
        .##.#.#....#...............#..#
        .........##.................#..
        #............##..##.........##.
        ##........#.........#..##.#...#
        ........#.....#..#.........#.##
        ....#......#.....##.##.........
        .#.#.....#.#..#..##....#....#..
        .###...#..##....##.....#.#..##.
        .#....#.#.......#..#..#...###..
        ..#.#......#.#..#.....###.....#
        #....#..#...#.....#.......#.##.
        .#.......##.#.#...#......#.....
        ###....#.#......#....#.#...##..
        ...#....####.......##.....#..#.
        .#.................#.......##.#
        ...#.###..........#..##......#.
        .....##.#..............##..#...
        #.....#..#..........#..#.......
        ..#...#.#.#.......##.#.....#...
        #........#.#........#.#.....#..
        #.....#...##....##..##........#
        .#.##..#...#....#........#..#..
        #..#.....#....#...##......#....
        ...#...#...#.#.#....##....#.#.#
        ......#...............#.....#..
        .......#.#..#..##.#.....#......
        ...........##......#...#.......
        ....##..##.....#.#...#.........
        ......##..###.......#....#.##..
        ......#..#.##....#..###..#.....
        .....#.........#........##.....
        .....####..................#...
        .#.#...##................#.....
        .#..#...#...#.....#.##..#..#...
        .#................#...###....#.
        ...#....#...........#...#....#.
        .......#....##...............#.
        .#.#.##..##.......#....#....###
        ......#.#....#...#..#..........
        ....#.##.#.#...##.#.#......#...
        ##....#...##.....#..#.###.#....
        .......#......#.........#.#...#
        .##.#...........##.........#.#.
        ##..##.....#...#..#.#...#....#.
        #..##......###........#...#....
        .....#.#.......#...#..##....##.
        .....#.#..#.....#.......#..##..
        ...#..#..............#.#.......
        .#.#...###......###............
        .....#.....#...#.###...........
        .......#..................#...#
        #....#...#...#....#....#.#....#
        ....#..#............#.#........
        #....#..........#.#.#..#..#....
        .......#....#......#....#......
        .##.#.#...#...#...##...........
        .........###.#..#..............
        ...#........##....#....#....###
        ....##..#.......#.#...#.#..#.#.
        .....##....#..##.........#.....
        ........##..#........#.........
        ...........#..#.##..##...#.....
        .........#.#..####..#...#.##.##
        ##..#.#.....##.....#.........#.
        ..#...#...#....#.#....#.....#.#
        .###.#....#.#......#....#......
        .##.....#....#.......#.#..#.##.
        #..#..##.....#....#...##.....#.
        ...#.........####.........##..#
        ..#.....#....###.#.#...#..#....
        .........#....#..#.#.........#.
        .....###.##..#...#.....#..#..#.
        ....#......#..#.#...#.....#....
        .......#...#..#....#.......#.#.
        .#....#............#....####...
        #..##..##....#.....#...#.....#.
        ...#...##...#.#....#...........
        .......#####.....#..###.#..#...
        .....#.....#.#....#.........#..
        .###.#..#...##.##.#.#..#..#....
        .#..#.##..#......#..........##.
        ##....#....#.........###..#....
        ..#.............#.......#.#....
        ..#.....#..##...#...###..#.##..
        ##...##...#.#....#..#..........
        ...............#.....#.......#.
        ....#.#......##.#......#...#.#.
        .........#.............#.#.....
        ...#.#.........................
        ..#..#....##..#...###.##.......
        ...##.#...##..#.#.##.#...#.##..
        .##....#....#.......#.....##..#
        .#...............#..#...#......
        ...##.....##.###....#.....#...#
        ...#.....#...####....##....#..#
        ..#.#.###..##.....#........#...
        .....##.##..#..#.........##....
        ........##.....#..........#.##.
        ..##.#....####..#...........#..
        ##....#..#..#.#.##.....#...##..
        ...#...#......#..#.#....#......
        ##.....##.......##.##....#.....
        .........#...##...........#....
        .###.#..#....##...#.....#.....#
        ...#..........#.###..##...#.##.
        ...#..#....#.#.#.......###.....
        ....#..#.#.....##...#.#.#.#....
        .......##..#...##..##.#....#...
        .##..........#.#.#.....#.....#.
        #....#......##...#..##.#..#..#.
        .#...#.....###..#......#.....#.
        .#..#.###.......#.##....###....
        #....#....#....#....#..#.##....
        ..#..#.....#.....#....###.....#
        ##.###..#...##.......#.#.......
        #...##......##....#.#...#....#.
        ..##.#.#....#...#.....##.......
        .#....#..#...#...##..##........
        ###......#.##....#.#..##.......
        ...#.....##.#.........#..#.....
        .......#.#....#.....##......#..
        #..#..............##.#........#
        ....#.#....#..#.#...##.........
        ..........#..........#.........
        .#.....#.....#.##....#.##..#..#
        .......#.......#.#.#.##....#...
        ..#...........#....#.......##..
        ..#.#.#.#...##..#.#.#..#...#.#.
        ..#..#..........#...##....#....
        ....##.#....#.............#....
        .##...##..........#.#..#...#...
        #..#..#.##..........##.........
        ............#.......#..#.....##
        ....#......#........#..#.##....
        #.#......#.#...#.....#.........
        ..#.....#..#..........#.....#..
        .#..#.#.#.##...#..#.#.........#
        #...##....#..##..#...#.#.##....
        #..##.##.#.##.......#.......#..
        #.#.......#........#.##....#.#.
        ....#..##....##..##......#..##.
        #.....#....#.#........####.....
        ......#...#...###..#...........
        .##.#.##...##................##
        ..##.#.....#.#..#......#.#.....
        ......#...#........#.....#.##..
        #..#.#..#.....#.#..#..##..#.#..
        ...#.........#.#.#.##...#......
        ...#..##....#..#.#....#.###.#..
        ........###................##.#
        ##...........#......##.##.....#
        .#.#.#....#....#....#..........
        #.....#........................
        ....#.....#...#......#.........
        ....#.#..#..............#......
        ##.........#..#....#.......#...
        .###....#..#.#.####.........#..
        ..#.#....#.....###..#..........
        ..........#................#.##
        """
            .components(separatedBy: .newlines)
            .map {
                Array($0.utf8.map(MapElement.init))
            }
}
